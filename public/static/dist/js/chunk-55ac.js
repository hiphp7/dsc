(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55ac"],{"0653":function(t,e,i){"use strict";i("68ef")},"09d6":function(t,e,i){"use strict";i("4917");var a=navigator.userAgent.toLowerCase();a.indexOf("Android")>-1||a.indexOf("Adr"),a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);function n(){return!!/micromessenger/.test(a)}e["a"]={isWeixinBrowser:n}},1146:function(t,e,i){},4917:function(t,e,i){i("214f")("match",1,function(t,e,i){return[function(i){"use strict";var a=t(this),n=void 0==i?void 0:i[e];return void 0!==n?n.call(i,a):new RegExp(i)[e](String(a))},i]})},"4ddd":function(t,e,i){"use strict";i("68ef"),i("dde9")},"565f":function(t,e,i){"use strict";var a=i("c31d"),n=i("fe7e"),s=i("a142");e["a"]=Object(n["a"])({render:function(){var t,e=this,i=e.$createElement,a=e._self._c||i;return a("cell",{class:e.b((t={error:e.error,disabled:e.$attrs.disabled,"min-height":"textarea"===e.type&&!e.autosize},t["label-"+e.labelAlign]=e.labelAlign,t)),attrs:{icon:e.leftIcon,title:e.label,center:e.center,border:e.border,"is-link":e.isLink,required:e.required}},[e._t("left-icon",null,{slot:"icon"}),e._t("label",null,{slot:"title"}),a("div",{class:e.b("body")},["textarea"===e.type?a("textarea",e._g(e._b({ref:"input",class:e.b("control",e.inputAlign),attrs:{readonly:e.readonly},domProps:{value:e.value}},"textarea",e.$attrs,!1),e.listeners)):a("input",e._g(e._b({ref:"input",class:e.b("control",e.inputAlign),attrs:{type:e.type,readonly:e.readonly},domProps:{value:e.value}},"input",e.$attrs,!1),e.listeners)),e.showClear?a("icon",{class:e.b("clear"),attrs:{name:"clear"},on:{touchstart:function(t){return t.preventDefault(),e.onClear(t)}}}):e._e(),e.$slots.icon||e.icon?a("div",{class:e.b("icon"),on:{click:e.onClickIcon}},[e._t("icon",[a("icon",{attrs:{name:e.icon}})])],2):e._e(),e.$slots.button?a("div",{class:e.b("button")},[e._t("button")],2):e._e()],1),e.errorMessage?a("div",{class:e.b("error-message"),domProps:{textContent:e._s(e.errorMessage)}}):e._e()],2)},name:"field",inheritAttrs:!1,props:{value:[String,Number],icon:String,label:String,error:Boolean,center:Boolean,isLink:Boolean,leftIcon:String,readonly:Boolean,required:Boolean,clearable:Boolean,labelAlign:String,inputAlign:String,onIconClick:Function,autosize:[Boolean,Object],errorMessage:String,type:{type:String,default:"text"},border:{type:Boolean,default:!0}},data:function(){return{focused:!1}},watch:{value:function(){this.$nextTick(this.adjustSize)}},mounted:function(){this.format(),this.$nextTick(this.adjustSize)},computed:{showClear:function(){return this.clearable&&this.focused&&""!==this.value&&this.isDef(this.value)&&!this.readonly},listeners:function(){return Object(a["a"])({},this.$listeners,{input:this.onInput,keypress:this.onKeypress,focus:this.onFocus,blur:this.onBlur})}},methods:{focus:function(){this.$refs.input&&this.$refs.input.focus()},blur:function(){this.$refs.input&&this.$refs.input.blur()},format:function(t){void 0===t&&(t=this.$refs.input);var e=t,i=e.value,a=this.$attrs.maxlength;return this.isDef(a)&&i.length>a&&(i=i.slice(0,a),t.value=i),i},onInput:function(t){this.$emit("input",this.format(t.target))},onFocus:function(t){this.focused=!0,this.$emit("focus",t),this.readonly&&this.blur()},onBlur:function(t){this.focused=!1,this.$emit("blur",t)},onClickIcon:function(){this.$emit("click-icon"),this.onIconClick&&this.onIconClick()},onClear:function(){this.$emit("input",""),this.$emit("clear")},onKeypress:function(t){if("number"===this.type){var e=t.keyCode,i=-1===String(this.value).indexOf("."),a=e>=48&&e<=57||46===e&&i||45===e;a||t.preventDefault()}"search"===this.type&&13===t.keyCode&&this.blur(),this.$emit("keypress",t)},adjustSize:function(){var t=this.$refs.input;if("textarea"===this.type&&this.autosize&&t){t.style.height="auto";var e=t.scrollHeight;if(Object(s["d"])(this.autosize)){var i=this.autosize,a=i.maxHeight,n=i.minHeight;a&&(e=Math.min(e,a)),n&&(e=Math.max(e,n))}e&&(t.style.height=e+"px")}}}})},"66b9":function(t,e,i){"use strict";i("68ef")},7401:function(t,e,i){t.exports=i.p+"img/user-1.png"},"8a58":function(t,e,i){"use strict";i("68ef"),i("4d75")},"8f80":function(t,e,i){"use strict";var a=i("fe7e");e["a"]=Object(a["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.b()},[t._t("default"),i("input",t._b({ref:"input",class:t.b("input"),attrs:{type:"file",accept:t.accept,disabled:t.disabled},on:{change:t.onChange}},"input",t.$attrs,!1))],2)},name:"uploader",inheritAttrs:!1,props:{disabled:Boolean,beforeRead:Function,afterRead:Function,accept:{type:String,default:"image/*"},resultType:{type:String,default:"dataUrl"},maxSize:{type:Number,default:Number.MAX_VALUE}},methods:{onChange:function(t){var e=this,i=t.target.files;!this.disabled&&i.length&&(i=1===i.length?i[0]:[].slice.call(i,0),!i||this.beforeRead&&!this.beforeRead(i)||(Array.isArray(i)?Promise.all(i.map(this.readFile)).then(function(t){var a=!1,n=i.map(function(n,s){return n.size>e.maxSize&&(a=!0),{file:i[s],content:t[s]}});e.onAfterRead(n,a)}):this.readFile(i).then(function(t){e.onAfterRead({file:i,content:t},i.size>e.maxSize)})))},readFile:function(t){var e=this;return new Promise(function(i){var a=new FileReader;a.onload=function(t){i(t.target.result)},"dataUrl"===e.resultType?a.readAsDataURL(t):"text"===e.resultType&&a.readAsText(t)})},onAfterRead:function(t,e){e?this.$emit("oversize",t):(this.afterRead&&this.afterRead(t),this.$refs.input&&(this.$refs.input.value=""))}}})},"9a88":function(t,e,i){"use strict";i.r(e);var a,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"profile"}},[a("van-cell-group",[a("van-cell",[a("template",{slot:"title"},[a("div",{staticClass:"s-user-top"},[a("div",{staticClass:"user-bg-box-1"},[a("img",{staticClass:"img",attrs:{src:i("7401")}})]),a("div",{staticClass:"user-bg2-box-1"},[a("img",{staticClass:"img",attrs:{src:i("d3bd")}})]),a("div",{staticClass:"user_profile_box"},[a("div",{staticClass:"user-img"},[a("van-uploader",{staticClass:"user-img-box",attrs:{"after-read":t.onRead("avatar"),accept:"image/jpg, image/jpeg, image/png, image/gif",multiple:""}},[t.userInfo.avatar?a("img",{staticClass:"img-height",attrs:{src:t.userInfo.avatar,alt:""}}):a("img",{staticClass:"img-height",attrs:{src:i("e31e"),alt:""}})])],1),a("div",{staticClass:"profile-index-top"},[""!=t.userInfo.name?a("h3",[t._v(t._s(t.userInfo.name))]):a("h3",[t._v(t._s(t.userInfo.username))]),a("p",[a("span",[t._v(t._s(t.$t("lang.username"))+" ")]),t._v(t._s(t.userInfo.username))])])])])])],2),a("van-cell",{attrs:{title:t.$t("lang.nickname"),"is-link":""},on:{click:function(e){t.isShow("name")}},model:{value:t.userInfo.name,callback:function(e){t.$set(t.userInfo,"name",e)},expression:"userInfo.name"}}),a("van-cell",{attrs:{title:t.$t("lang.sex"),value:t.isSex,"is-link":""},on:{click:function(e){t.isShow("isSex")}}}),a("van-cell",{attrs:{title:t.$t("lang.birthday"),"is-link":""},on:{click:function(e){t.isShow("birthday")}},model:{value:t.userInfo.birthday,callback:function(e){t.$set(t.userInfo,"birthday",e)},expression:"userInfo.birthday"}}),a("van-cell",{attrs:{title:t.$t("lang.address"),to:{name:"address"},"is-link":""}})],1),a("van-cell-group",{staticClass:"m-top10"},[a("van-cell",{attrs:{title:t.$t("lang.real_name"),to:{name:"realname"},"is-link":""}}),a("van-cell",{attrs:{title:t.$t("lang.account_security"),to:{name:"accountsafe"},"is-link":""}})],1),a("van-cell-group",{staticClass:"m-top10"},[a("van-cell",{attrs:{title:t.$t("lang.use_help"),to:{name:"help"},"is-link":""}})],1),t.isWeiXin?t._e():a("div",{staticClass:"ect-button-more padding-all"},[a("van-button",{attrs:{size:"large",tag:"a"},on:{click:t.handelLogout}},[t._v(t._s(t.$t("lang.drop_out")))])],1),a("section",{staticClass:"demo-popup",class:{active:1==t.show}},[a("div",{staticClass:"my-box"},["name"==t.type?[a("div",{staticClass:"my-box-item"},[a("div",{staticClass:"text-all dis-box"},[a("label",[t._v(t._s(t.$t("lang.nickname")))]),a("div",{staticClass:"input-text box-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nick_name,expression:"nick_name"}],staticClass:"j-input-text inputcard",attrs:{type:"text",name:"name",placeholder:t.$t("lang.nickname"),autocomplete:"off"},domProps:{value:t.nick_name},on:{input:function(e){e.target.composing||(t.nick_name=e.target.value)}}})])])])]:"isSex"==t.type?[a("div",{staticClass:"my-box-item"},[a("ul",{staticClass:"user-sex dis-box"},[a("li",{staticClass:"box-flex"},[a("label",{attrs:{for:"sex_1"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isSexNum,expression:"isSexNum"}],attrs:{type:"radio",name:"sex",value:"1",id:"sex_1"},domProps:{checked:t._q(t.isSexNum,"1")},on:{change:function(e){t.isSexNum="1"}}}),a("i",{staticClass:"iconfont icon-nan my-sex-size"}),a("h4",[t._v(t._s(t.$t("lang.male")))])])]),a("li",{staticClass:"box-flex"},[a("label",{attrs:{for:"sex_2"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isSexNum,expression:"isSexNum"}],attrs:{type:"radio",name:"sex",value:"2",id:"sex_2"},domProps:{checked:t._q(t.isSexNum,"2")},on:{change:function(e){t.isSexNum="2"}}}),a("i",{staticClass:"iconfont icon-nv my-sex-size"}),a("h4",[t._v(t._s(t.$t("lang.woman")))])])])])])]:[a("div",{staticClass:"my-box-item"},[a("div",{staticClass:"text-all dis-box"},[a("label",[t._v(t._s(t.$t("lang.birthday")))]),a("div",{staticClass:"input-text box-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.birthday,expression:"birthday"}],staticClass:"j-input-text inputcard",attrs:{type:"date",name:"birthday",placeholder:"1970-01-01",autocomplete:"off"},domProps:{value:t.birthday},on:{input:function(e){e.target.composing||(t.birthday=e.target.value)}}})])])])],a("div",{staticClass:"ect-button-more"},[a("button",{staticClass:"btn btn-submit",on:{click:t.updateInfo}},[t._v(t._s(t.$t("lang.confirm")))])])],2)])],1)},s=[],r=i("9395"),o=i("88d8"),l=(i("e930"),i("8f80")),c=(i("e7e5"),i("d399")),u=(i("4ddd"),i("9f14")),d=(i("a44c"),i("e27c")),f=(i("be7f"),i("565f")),p=(i("8a58"),i("e41f")),h=(i("66b9"),i("b650")),m=(i("0653"),i("34e9")),b=(i("7f7f"),i("c194"),i("7744")),v=i("4328"),g=i.n(v),x=i("2f62"),_=i("09d6"),y={name:"profile",mixins:[_["a"]],data:function(){return{show:!1,type:"name"}},components:(a={},Object(o["a"])(a,b["a"].name,b["a"]),Object(o["a"])(a,m["a"].name,m["a"]),Object(o["a"])(a,h["a"].name,h["a"]),Object(o["a"])(a,p["a"].name,p["a"]),Object(o["a"])(a,f["a"].name,f["a"]),Object(o["a"])(a,d["a"].name,d["a"]),Object(o["a"])(a,u["a"].name,u["a"]),Object(o["a"])(a,c["a"].name,c["a"]),Object(o["a"])(a,l["a"].name,l["a"]),a),created:function(){this.$store.dispatch("userProfile")},computed:Object(r["a"])({},Object(x["c"])({userInfo:function(t){return t.user.userInfo}}),{isSexNum:{get:function(){return this.userInfo.sex},set:function(t){this.$store.dispatch("userUpdateText",{type:"sex",val:t})}},nick_name:{get:function(){return this.userInfo.name},set:function(t){this.$store.dispatch("userUpdateText",{type:"name",val:t})}},birthday:{get:function(){return this.userInfo.birthday},set:function(t){this.$store.dispatch("userUpdateText",{type:"birthday",val:t})}},isSex:function(){var t=[this.$t("lang.secrecy"),this.$t("lang.male"),this.$t("lang.woman")];return t[this.isSexNum]},isWeiXin:function(){return _["a"].isWeixinBrowser()}}),methods:{isShow:function(t){this.show=!0,this.type=t},handelLogout:function(){this.$store.dispatch("userLogout"),c["a"].loading({mask:!0,message:this.$t("lang.loading"),duration:1e3},this.$router.push({path:"/login"}))},updateInfo:function(){var t=this,e={sex:this.isSexNum,name:this.nick_name,birthday:this.birthday};this.$http.put("".concat(window.ROOT_URL,"api/v4/user/profile"),g.a.stringify(e)).then(function(e){"success"==e.data.status?(c["a"].loading({duration:1e3,message:t.$t("lang.edit_success")}),t.show=!1):Object(c["a"])(t.$t("lang.edit_fail"))})},onRead:function(t){var e=this;return function(i){i.length>1?Object(c["a"])(e.$t("lang.only_one_image_can_be_selected")):e.$store.dispatch("setMaterial",{file:i,type:t}).then(function(t){e.$store.dispatch("userUpdateAvatar",{pic:t.data[0]})})}}}},$=y,k=i("2877"),C=Object(k["a"])($,n,s,!1,null,null,null);C.options.__file="Profile.vue";e["default"]=C.exports},"9f14":function(t,e,i){"use strict";var a=i("fe7e"),n=i("f331");e["a"]=Object(a["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.b({disabled:t.isDisabled}),on:{click:function(e){t.$emit("click")}}},[i("span",{class:t.b("input")},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],class:t.b("control"),attrs:{type:"radio",disabled:t.isDisabled},domProps:{value:t.name,checked:t._q(t.currentValue,t.name)},on:{change:function(e){t.currentValue=t.name}}}),i("icon",{attrs:{name:t.currentValue===t.name?"checked":"check"}})],1),t.$slots.default?i("span",{class:t.b("label",t.labelPosition),on:{click:t.onClickLabel}},[t._t("default")],2):t._e()])},name:"radio",mixins:[n["a"]],props:{name:null,value:null,disabled:Boolean,labelDisabled:Boolean,labelPosition:Boolean},computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(t){(this.parent||this).$emit("input",t)}},isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled}},created:function(){this.findParent("van-radio-group")},methods:{onClickLabel:function(){this.isDisabled||this.labelDisabled||(this.currentValue=this.name)}}})},a44c:function(t,e,i){"use strict";i("68ef")},bcd3:function(t,e,i){},be7f:function(t,e,i){"use strict";i("68ef"),i("1146")},c194:function(t,e,i){"use strict";i("68ef")},d3bd:function(t,e,i){t.exports=i.p+"img/user-2.png"},dde9:function(t,e,i){},e27c:function(t,e,i){"use strict";var a=i("fe7e");e["a"]=Object(a["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.b()},[t._t("default")],2)},name:"radio-group",props:{value:null,disabled:Boolean},watch:{value:function(t){this.$emit("change",t)}}})},e31e:function(t,e,i){t.exports=i.p+"img/user_default.png"},e41f:function(t,e,i){"use strict";var a=i("fe7e"),n=i("6605");e["a"]=Object(a["a"])({render:function(){var t,e=this,i=e.$createElement,a=e._self._c||i;return a("transition",{attrs:{name:e.currentTransition}},[e.shouldRender?a("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],class:e.b((t={},t[e.position]=e.position,t))},[e._t("default")],2):e._e()])},name:"popup",mixins:[n["a"]],props:{transition:String,overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0},position:{type:String,default:""}},computed:{currentTransition:function(){return this.transition||(""===this.position?"van-fade":"popup-slide-"+this.position)}}})},e930:function(t,e,i){"use strict";i("68ef"),i("bcd3")},f331:function(t,e,i){"use strict";e["a"]={data:function(){return{parent:null}},methods:{findParent:function(t){var e=this.$parent;while(e){if(e.$options.name===t){this.parent=e;break}e=e.$parent}}}}}}]);